#******************************************************************************#
# A program package for calculating great arc dist, azimuth, projection        #
# on the spherical Earth coordinate.                                           #
#------------------------------------------------------------------------------#
#     May 2020  - Yaochong.Sun -  Create                                       #
#------------------------------------------------------------------------------#
#===============================================================================
# Directory
#===============================================================================
BINDIR  := ./bin
OBJDIR  := ./obj
skeldir := $(OBJDIR) $(BINDIR)
#-------------------------------------------------------------------------------
SRCDIR  := ./src
INCLUDE := -I./include
#-------------------------------------------------------------------------------

#===============================================================================
# Compiler and Option
#===============================================================================
CXX      := g++
CXXFLAGS := -Wall -Wextra -Werror -std=c++11
LDFLAGS  :=

#===============================================================================
# Source File Names, Object File Names and  Executable File names
#===============================================================================
SRCCXX := tool_memory.cpp   \
          struct_coord.cpp  \
          struct_matrix.cpp \
          funct_kriging.cpp \
          funct_coord.cpp

OBJMOD := $(SRCCXX:%.cpp=$(OBJDIR)/%.o)

TARGET1 := kriging 

#===============================================================================
# Searching Path
#===============================================================================
vpath %.cpp $(SRCDIR)
vpath %.h   $(SRCDIR)

#===============================================================================
# Target
#===============================================================================
PHONYLIST := all skel
.PHONY: $(PHONYLIST)

all: skel t1

t1: $(BINDIR)/$(TARGET1)

skel:
	@mkdir -p $(skeldir)

$(BINDIR)/$(TARGET1): $(OBJMOD) $(OBJDIR)/main_kriging.o
	@echo "===================== compile $@ ====================="
	$(CXX) $(CXXFLAGS) $(LDFLAGS) -o $@ $^
	@echo

#===============================================================================
# Suffixes Rules
#===============================================================================
.SUFFIXES:
.SUFFIXES: .cpp .o

$(OBJDIR)/%.o: %.cpp
	@echo "--------------------- compile $@ ---------------------"
	$(CXX) $(CXXFLAGS) $(INCLUDE) $(DFLAGS) -c $(SRCDIR)/$(<F) -o $@

#===============================================================================
# Suffixes Rules
#===============================================================================
RM := rm

clean:
	$(RM) -rf $(BINDIR)/*
	$(RM) -rf $(OBJDIR)/*

distclean:
	$(RM) -rf $(BINDIR)
	$(RM) -rf $(OBJDIR)
#===============================================================================
# vim:ft=make:ts=4:sw=4:nu:et:ai:spell:nowrap
